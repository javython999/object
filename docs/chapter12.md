# 12. 다형성
## 01 다형성
## 02 상속의 양면성
## 03 업캐스팅과 동적 바인딩
## 04 동벅 메서드 탐색과 다형성
객체지향 시스템은 다음 규칙에 따라 실행할 메서드를 선택한다.
* 메시지를 수신한 객체는 먼저 자신을 생성한 클래스에 적합한 메서드가 있는지 검사한다. 존재하면 메서드를 실행하고 탐색을 종료한다.
* 메서드를 찾지 못하면 부모 클래스에서 메서드 탐색을 계속한다. 이 과정은 적합한 메서드를 찾을 때까지 상속 게층을 따라 올라가며 계속 된다.
* 상속 게층의 가장 최상위 클래스에 이르렀지만 메서드를 발견하지 못한 경우 예외를 발생시키며 탐색을 중단한다.

> 자동적인 메시지 위임

동적 메서드 탐색의 입장에서 상속 계층은 메시지를 수신한 객체가 자신이 이해할 수 없는 메시지를 부모 클래스에게 전달하기 위한 물리적인 경로를 정의하는 것으로 볼 수 있다.
상속 게층안에서 메시지를 처리할 방법을 알지 못할경우 메시지에 대한 처리를 부모 클래스에게 위임한다.
여기서 핵심은 적절한 메서드를 찾을 때까지 상속 계층을 따라 부모 클래스로 처리가 위임된다는 것이다.

자식 클래스에서 부모 클래스의 방향으로 자동으로 메시지 처리가 위임되기 때문에 자식 클래스에서 어떤 메서드를 구현하고 있느냐에 따라 부모 클래스에 구현된 메서드의 운명이 결정되기도 한다.
메서드 오버라이딩은 자식 클래스의 메서드가 동일한 시그니처를 가진 부모 클래스의 메서드보다 먼저 탐색되기 때문에 벌어지는 현상이다.

자식 클래스와 부모 클래스에 똑같은 이름의 메서드가 존재하지만 시그니처가 다른 경우 두 메서드는 사이좋게 공존한다. 이 경우를 메서드 오버로딩이라고 한다.

> 동적인 문맥

동일한 코드라고 하더라도 self 참조가 가리키는 객체가 무엇인지에 따라 메서드 탐색을 위한 상속 계층의 범위가 동적으로 변한다.
따라서 self 참조가 가리키는 객체의 타입을 변경함으로써 객체가 실행 될 문맥을 종적으로 바꿀 수 있다.

> 이해할 수 없는 메시지

자신이 처리할 수 없는 메시지를 수신하면 부모 클래스로 처리를 위임한다.
상속 계층의 정상에 오고 나서야 자신이 메시지를 처리할 수 없다는 사실을 알게 됐다면 어떻게 할까?

1. 정적 타입 언어와 이해할 수 없는 메시지
* 컴파일러는 상속 게층을 따라가면서 메시지를 처리할 수 있는 메서드가 존재하는지 검색한다.
* 적절한 메서드를 찾을 수 없을 경우 컴파일 에러를 발생시켜 메시지를 처리할 수 없다는 사실을 프로그래머에게 알린다.

2. 동적 타입 언어와 이해할 수 없는 메시지
* 동적 타입 언어는 컴파일 단계가 존재하지 않기 때문에 실제로 코드를 실행해보기 전에는 메시지 처리 가능 여부를 판단할 수 없다.
* 최상위 클래스까지 메서드를 탐색한 후 메서드를 처리할 수 없다는 사실을 발견하면  현재 객체에게 메시지를 이해할 수 없다는 메시지를 전송한다.

> self 대 super

self 참조의 가장 큰 특징은 동적이라는 점이다.
self의 이런 특성과 대비해서 언급할 만한 가치가 있는 것이 바로 super 참조(super reference)다.

자식 클래스에서 부모 클래스의 인스턴스 변수나 메서드에 접근하기 위해서 사용할 수 있는 super 참조라는 내부 변수를 제공한다.
super 참조의 용도는 부모 클래스에 정의된 메서드를 실행하기 위한 것이 아니다.
super 참조의 정확한 의도는 '지금 이 클래스의 부모 클래스에서부터 메서드 탐색을 시작하세요'다.
이것은 super 참조를 통해 실행하고자 하는 메서드가 반드시 부모 클래스에 위치하지 않아도 되는 유연성을 제공한다.

## 05 상송 대 위임
> 위임과 self 참조

자신이 수신한 메시지를 다른 객체에게 동일하게 전달해서 처리를 요청하는 것을 위임(delegation)이라고 부른다.
위임은 본질적으로 자신이 정의하지 않거나 처리할 수 없는 속성 또는 메서드의 탐색 과정을 다른 객체로 이동시키기 위해 사용한다. 이를 위해 위임은 항상 현재의 실행 문맥을 가리키는 self 참조를 인자로 전달한다.
이것이 바로 self 참조를 전달하지 않는 포워딩과 위임의 차이점이다.

> 프로토타입 기반 객체지향 언어

자바스크립트의 모든 객체들은 다른 객체를 가리키는 용도로 사용되는 prototype이라는 이름의 링크를 가진다.
자바스크립트에서 인스턴스는 메시지를 수신하면 먼저 메시지를 수신한 객체의 prototype안에서 메시지에 응답할 적절한 메서드가 존재하는지 검사한다.
만약 메서드가 존재하지 않는다면 prototype이 가리키는 객체를 따라 메시지 처리를 자동적으로 위임한다.
